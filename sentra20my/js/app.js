"use strict";var production=!1===$("#appjs").data("mode"),friendo_url=$("#appjs").data("site"),device=deviceCheck();Vue.config.devtools=!production,Vue.config.debug=!production,Vue.config.silent=production;var md=new MobileDetect(window.navigator.userAgent),tag=document.createElement("script");function findGetParameter(n){var t,i=null;return location.search.substr(1).split("&").forEach(function(e){(t=e.split("="))[0]===n&&(i=decodeURIComponent(t[1]))}),i}function checkCookie(n){var t,i=null;return document.cookie.split(";").forEach(function(e){" "==e.charAt(0)&&(e=e.substring(1)),(t=e.split("="))[0]===n&&(i=t[1])}),i}function deviceCheck(){var e={},n=new MobileDetect(window.navigator.userAgent);return n.match(/android/i)?(e.os="android",e.version=n.version("android")):n.match(/(iphone|ipad|ipod);?/i)?(e.os="ios",e.version=n.version("iOS")):(e.os="pc",e.version=n.version("Chrome")),e}$(function(){console.log("v1.0"),console.log(device),$(".nav").menu()}),Vue.mixin({data:function(){return{status:"",startDate:"",endDate:"",projectStatus:null,errorMsg:"",envMode:production?"Started":"Testing",loading:!1,mainToken:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY4NjM3MTNjYmU5MDI0NmY2MWY3NWFjNTY0NzA5ZjdiMjdiNjdkNDc1ZWI2YmNmNmFmZmIwYzBmNjUzOThiMzg4YjhiYTBjYTNlM2RmMzkwIn0.eyJhdWQiOiIxIiwianRpIjoiNjg2MzcxM2NiZTkwMjQ2ZjYxZjc1YWM1NjQ3MDlmN2IyN2I2N2Q0NzVlYjZiY2Y2YWZmYjBjMGY2NTM5OGIzODhiOGJhMGNhM2UzZGYzOTAiLCJpYXQiOjE1OTI3OTgyMDksIm5iZiI6MTU5Mjc5ODIwOSwiZXhwIjoxNjI0MzM0MjA5LCJzdWIiOiI2Iiwic2NvcGVzIjpbXX0.VxHy-ndisZgLasdYZ79lkvrupv-S5gkbz3xOEPeMAv-jWlTE_YQnhu7Uhasc6DfkRNRUUMudPEBOJFF-2t6mtxivr0Rchfq8DKFWI_iXL9hZc3AGdFQGzG3nRcQbnwG0gWmzNjTv5aVwHFYU3wNE4jsR53-1ubHyd8cTEK8T7oPTvSlZPaUhgPnYjw-NSZ4U5Wd2JGH5CDligslSBAS3K6SHB4i2dYVhfrxhCDVbe2FTk6AgaqmndDB-8_FZzcuR6h1kjxzQ5dVA915YqqleZWl7vNCa6W0yZLAVNBmrTO-xkTuEsBN3k4rwz-UhAwmE2VjZ7J6fZLO_Mem1ZelHzX4vUCHuSmSY-8gkUpYgXSSz362ucLipShJj9Cy5BXflXcEUIz2xdqfmFH1R9uwe3Yjn3GaeM1dG1l8lS-rgPGfHX1eIqrE7V423ZnTBznk_GW5LgsGuRB31DNXkT1fzKOblvdV6Fdlf5HzKc7ByHp9uCjmi0JYcc4xZOxNeAy1TQpM02wH7cDOScX9m-6ssns_OKJZGrvifwD2IVpzKl-SBmFGMcDwmWjDu9TSCrntebyc0mwMQ3KiyTtRsJ2D6dO7cex2i8Y0wDIRVdpnoEwhDzT7Fq4rUpprsAI917-o-YAdrxvgkVZxQL3TV0w6TmA2x2Znrqqgr7x5MxZwfSjc",apiUrl:"https://nissanlinebc.nissan.com.tw/",entId:"1",lineId:"",popup:!1,popPage:"",evtpopup:!1,userArr:[]}},computed:{},watch:{errorMsg:function(e){$("body").toggleClass("_freeze")}},methods:{gaEvant:function(e){dataLayer.push({event:e}),console.log("ga:",e)},server_busy:function(){var e=this;e.errorMsg="系統忙碌中，請稍後在試!",e.loading=!1,e.errorCou=6},setCookie:function(e,n,t){var i=new Date;i.setTime(i.getTime()+1e3*t);i="expires="+i.toUTCString();document.cookie=e+"="+n+";"+i+";"},logger:function(e,n,t){production&&_LTracker.push({level:["ERROR","DEBUG","WARNING","INFO","ALL"][e],content:JSON.stringify(n),path:window.location.href,tag:t||null,device:device,timestamp:Date.now()})},checkOnline:function(){navigator.onLine||alert("Internet 連線已斷開，請確認您的網路狀態。")},scrollTo:function(e){$("html,body").animate({scrollTop:$(e).offset().top},500)},getToken:function(){var n=this;return $.ajax({url:"".concat(friendo_url,"auth/login?projectId=66"),headers:{webtoken:"WBqIHc9hTmwyL+g9m0ykfA=="},method:"GET",dataType:"json"}).done(function(e){n.mainToken=e.token,n.startDate=e.startDate,n.endDate=e.endDate,n.projectStatus=e.projectStatus})},grecaptcha:function(n){function e(e){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(t){var i=this;return new Promise(function(n,e){grecaptcha.execute("6LfUo7MUAAAAAJQAML08ruhPeYZvihLYaVvtuYrJ",{action:t}).then(function(e){i.reCaptcha=e,n()},function(){alert("Google驗證失敗，請再次嘗試\n如無法排除此問題，建議重新整理此頁面"),e()})})}),initLiff:function(e){var n=this;liff.init({liffId:e}).then(function(){liff.ready.then(function(){liff.isLoggedIn()?liff.getProfile().then(function(e){n.linePic=e.pictureUrl,n.lineName=e.displayName,n.lineId=e.userId}).catch(function(e){}):window.location="https://lin.ee/wLVkkm9"})}).catch(function(e){})},getLeader:function(){var n=this;return $.ajax({url:"".concat(n.apiUrl,"api/lottery/").concat(n.entId,"/leader"),headers:{Authorization:"Bearer "+n.mainToken},method:"GET",dataType:"json"}).done(function(e){n.scoreArr=e.data.leader})},showArr:function(){this.userArr=[];for(var e=1;e<11;e++)this.userArr.push({seq:e,name:e+"aaa",min:10*e,sec:e+10,piclink:""})},openPop:function(e){this.popup=!0,"popleader"==(this.popPage=e)&&this.showArr()},closePop:function(){this.popup=!1,this.popPage=""},eventShare:function(){var e=encodeURIComponent("https://event.nissan.com.tw/sentra_line");window.location="http://line.naver.jp/R/msg/text/?欸~這超~~~難的！你要不要玩玩看~還可以抽 Switch 和 LINE POINTS 點數哦！%0D%0A《ALL NEW SENTRA 先潮耐力賽》%0D%0A".concat(e)},checkAward:function(){this.popup=!0,this.popPage="noAward"},noticketShare:function(){this.eventShare(),this.ticketCount+=1,this.popup=!1,this.popPage=""}},mounted:function(){}});