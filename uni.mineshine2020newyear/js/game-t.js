"use strict";var index_view=new Vue({el:"#app",data:{fileimg:{fimg1:"",fimg2:"",fimg3:""}},methods:{readpoto:function(t){var d=this,e=t.target.files.item(0),a=t.target.id,i=new FileReader;i.addEventListener("load",function(t){if("files1"==a){d.fileimg.fimg1=t.target.result;var e=(h=document.getElementById("canvas")).getContext("2d"),i=new Image;h.width=500,h.height=500,i.onload=function(){var t=i.width/i.height;e.clearRect(0,0,500,500),500<i.width&&500<i.height?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.width&&i.height<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.height&&i.width<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width*t,h.width):e.drawImage(i,0,0,i.width,i.height)},i.src=t.target.result}if("files2"==a){d.fileimg.fimg2=t.target.result;e=(h=document.getElementById("canvas2")).getContext("2d"),i=new Image;h.width=500,h.height=500,i.onload=function(){var t=i.width/i.height;e.clearRect(0,0,500,500),500<i.width&&500<i.height?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.width&&i.height<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.height&&i.width<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width*t,h.width):e.drawImage(i,0,0,i.width,i.height)},i.src=t.target.result}if("files3"==a){d.fileimg.fimg3=t.target.result;var h;e=(h=document.getElementById("canvas3")).getContext("2d"),i=new Image;h.width=500,h.height=500,i.onload=function(){var t=i.width/i.height;e.clearRect(0,0,500,500),500<i.width&&500<i.height?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.width&&i.height<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width,h.width/t):500<i.height&&i.width<500?e.drawImage(i,0,0,i.width,i.height,0,0,h.width*t,h.width):e.drawImage(i,0,0,i.width,i.height)},i.src=t.target.result}}),i.readAsDataURL(e)},drawLoop:function(){var I=document.getElementById("canvas"),v=document.getElementById("canvas2"),E=document.getElementById("canvas3"),y=document.getElementById("drawimg"),C=document.getElementById("drawimg2"),x=document.getElementById("drawimg3"),t=y.getContext("2d"),e=C.getContext("2d"),i=x.getContext("2d"),B=document.getElementById("cutcan"),R=document.getElementById("cutcan2"),p=document.getElementById("cutcan3"),L=B.getContext("2d"),b=R.getContext("2d"),k=p.getContext("2d");y.width=500,y.height=500,C.width=500,C.height=500,x.width=500,x.height=500,B.width=R.width=p.width=200,B.height=R.height=p.height=200,L.font=b.font=k.font="30px Comic Sans MS",L.textAlign=b.textAlign=k.textAlign="center",t.clearRect(0,0,y.width,y.height),e.clearRect(0,0,C.width,C.height),i.clearRect(0,0,x.width,x.height),L.clearRect(0,0,L.width,L.height),b.clearRect(0,0,b.width,b.height),k.clearRect(0,0,k.width,k.height);var F=new clm.tracker;F.init();var M=new clm.tracker;M.init();var P=new clm.tracker;P.init(),F.start(I),M.start(v),P.start(E),document.addEventListener("clmtrackrNotFound",function(t){console.log("照片不符合"),F.stop(),M.stop(),P.stop(),clearInterval(A)},!1);var A=setInterval(function(){!function(){var t=F.getCurrentPosition(),e=M.getCurrentPosition(),i=P.getCurrentPosition();console.log(t[0],t[7],t[14],t[21]);var h,d,a=t[1][0],n=t[21][1]-10,g=t[14][0],r=t[7][1],w=e[1][0],o=e[21][1]-10,c=e[14][0],m=e[7][1],l=i[1][0],s=i[21][1]-10,u=i[14][0],f=i[7][1];F.getCurrentPosition()&&M.getCurrentPosition()&&P.getCurrentPosition()&&(h=Math.abs(g-a),(d=Math.abs(r-n))<h?h=d:d=h,F.draw(y),L.drawImage(I,a,n,h,d,0,0,B.width,B.height),F.stop(),F.reset(),h=Math.abs(c-w),(d=Math.abs(m-o))<h?h=d:d=h,M.draw(C),b.drawImage(v,a,n,h,d,0,0,R.width,R.height),M.stop(),M.reset(),h=Math.abs(u-l),(d=Math.abs(f-s))<h?h=d:d=h,P.draw(x),k.drawImage(E,a,n,h,d,0,0,p.width,p.height),clearInterval(A),P.stop(),P.reset())}()},1e3)},game:function(){new Image;var t=document.getElementById("canvas"),n=(t.getContext("2d"),document.getElementById("drawimg"));n.getContext("2d");t.width=500,t.height=500,n.width=t.width,n.height=t.height;var h,d,g=new clm.tracker;if(g.init(),document.addEventListener("clmtrackrNotFound",function(t){g.stop(),alert("The tracking had problems with finding a face in this image. Try selecting the face in the image manually.")},!1),window.File&&window.FileReader&&window.FileList){var e=function(t){var e=t.target.files;console.log(e),h=[];for(var i=0;i<e.length;i++)e[i].type.match("image.*")&&h.push(e[i]);0<e.length&&(d=0),function(){if(h.indexOf(d)<0){var t=new FileReader;t.onload=(h[d],function(t){var e=document.getElementById("canvas"),i=e.getContext("2d"),h=document.getElementById("drawimg"),d=h.getContext("2d"),a=new Image;a.onload=function(){var t=a.width/a.height;i.clearRect(0,0,500,500),i.drawImage(a,0,0,a.width,a.height),d.clearRect(0,0,500,500),(500<a.width||500<a.height)&&(i.clearRect(0,0,e.width,e.height),i.drawImage(a,0,0,a.width,a.height,0,0,e.width,e.width/t),h.width=e.width,h.height=e.height,d.clearRect(0,0,h.width,h.height)),g.reset(),g.start(e),setTimeout(function(){g.draw(h),console.log(n.toDataURL("image/jpeg",.7))},1e3)},a.src=t.target.result}),t.readAsDataURL(h[d])}}()};document.getElementById("files1").addEventListener("change",e,!1),document.getElementById("files2").addEventListener("change",e,!1),document.getElementById("files3").addEventListener("change",e,!1)}}},mounted:function(){}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdC5qcyJdLCJuYW1lcyI6WyJpbmRleF92aWV3IiwiVnVlIiwiZWwiLCJmaWxlaW1nIiwiZmltZzEiLCJmaW1nMiIsImZpbWczIiwibWV0aG9kcyIsInJlYWRwb3RvIiwiZSIsInZtIiwidGhpcyIsImZpbGUiLCJ0YXJnZXQiLCJpdGVtIiwiaWQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlYWRBc0RhdGFVUkwiLCJyZXN1bHQiLCJjdHgiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsImltZ09iaiIsIkltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJyZWwiLCJzcmMiLCJvbmxvYWQiLCJkcmF3TG9vcCIsImNhbnZhczEiLCJjYW52YXMyIiwiY2FudmFzMyIsImRyYXdpbWcxIiwiZHJhd2ltZzIiLCJkYzMiLCJkcmF3aW1nMyIsImN1dGNhbjEiLCJjdXRjYW4yIiwiY3V0Y2FuMyIsImRjMiIsImN0YzEiLCJjdGMyIiwiY3RjMyIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJjdHJhY2tlciIsImNsbSIsInRyYWNrZXIiLCJpbml0Iiwic3RhcnQiLCJjdHJhY2tlcjIiLCJldmVudCIsImxvZyIsImN0cmFja2VyMyIsInN0b3AiLCJjaHBvIiwiY1ciLCJzZXRJbnRlcnZhbCIsImdldEN1cnJlbnRQb3NpdGlvbiIsImNvbnNvbGUiLCJwb3MxIiwiY0giLCJjYW5TWCIsInBvc2xvb3AiLCJjYW5FWCIsImNhbkVYMiIsInBvczIiLCJwb3MzIiwiTWF0aCIsImFicyIsImNhbkVZIiwiY2FuU1kiLCJyZXNldCIsImNhblNYMiIsImNhbkVZMiIsImNhblNZMiIsImRyYXciLCJjYW5FWDMiLCJjYW5TWDMiLCJjYW5FWTMiLCJjYW5TWTMiLCJnYW1lIiwiZHJhd0ltZyIsImZpbGVMaXN0IiwiZmlsZUluZGV4IiwiYWxlcnQiLCJ3aW5kb3ciLCJGaWxlIiwiRmlsZUxpc3QiLCJoYW5kbGVGaWxlU2VsZWN0IiwiZXZ0IiwiZmlsZXMiLCJpIiwibGVuZ3RoIiwidHlwZSIsIm1hdGNoIiwiaW5kZXhPZiIsImNjIiwiZHJhd2ltZyIsImRjIiwiaW1nIiwic2V0VGltZW91dCIsInRvRGF0YVVSTCIsImxvYWRJbWFnZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBSUEsV0FBYSxJQUFJQyxJQUFJLENBQ3JCQyxHQUFJLE9BREpGLEtBQUFBLENBQ0lHLFFBRGlCLENBRWZDLE1BQUEsR0FDS0MsTUFBRSxHQUNBQyxNQURBLEtBQUFDLFFBQUEsQ0FIUUMsU0FHUixTQUhRQyxHQVNaLElBQUFDLEVBQUFDLEtBQUFDLEVBQUFILEVBQUFJLE9BQ0lKLE1BQUdLLEtBQUEsR0FBT0MsRUFBQU4sRUFBQUksT0FBQUUsR0FLZkMsRUFBQSxJQUFBQyxXQUNBRCxFQUFBRSxpQkFBQSxPQUNJRixTQUFhQyxHQUNWQyxHQUFBQSxVQUFBQSxFQUFpQixDQUNqQkMsRUFBQUEsUUFBUGYsTUFBQUssRUFBQUksT0FBQU8sT0FJUSxJQUhSQyxHQUdZQyxFQUFTQyxTQUFTQyxlQUFlLFdBSHpCQyxXQUFBLE1BQ1BDLEVBQVUsSUFBQUMsTUFDZkwsRUFBQU0sTUFBcUJmLElBQ1hTLEVBQUdDLE9BQVNDLElBQ1pGLEVBQU9HLE9BQUFBLFdBQ0osSUFBSUUsRUFBakJELEVBQUFFLE1BQUFGLEVBQUFHLE9BQ0FSLEVBQUFTLFVBQUEsRUFBQSxFQUFBLElBQUEsS0FDQSxJQUFnQkosRUFBaEJFLE9BQUEsSUFBQUYsRUFBQUcsT0FLUVIsRUFBSVUsVUFBVUwsRUFBTyxFQUFFLEVBQUVBLEVBQU9FLE1BQU1GLEVBQU9HLE9BQU8sRUFBRSxFQUFFUCxFQUFPTSxNQUFNTixFQUFPTSxNQUFNSSxHQUh0REgsSUFBZkQsRUFBUUYsT0FBekJBLEVBQUFHLE9BQUEsSUFDQVIsRUFBa0JVLFVBQWxCTCxFQUFBLEVBQUEsRUFBQUEsRUFBQUUsTUFBQUYsRUFBQUcsT0FBQSxFQUFBLEVBQUFQLEVBQUFNLE1BQUFO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NkUsRUFBQTVFLE9BQUFQLEVBQUFPLE9BQ0E2RSxFQUFBNUUsVUFBQSxFQUFBLEVBQUEyRSxFQUFBN0UsTUFBQTZFLEVBQUE1RSxTQUVBdUIsRUFBQTJCLFFBQ0EzQixFQUFBSSxNQUFBbEMsR0FDQXNGLFdBQUEsV0FnQlF4RCxFQUFTK0IsS0FBS3NCLEdBZlR2QyxRQUFXUCxJQUFBOEIsRUFBQW9CLFVBQUEsYUFBQSxNQUNOakYsTUFFZCtFLEVBQUExRSxJQUFBeEIsRUFBcUJrRyxPQUFJL0UsU0FFdEIrRSxFQUFJL0UsY0FBZStFLEVBQUFoQixLQWxEbENtQixJQVBRdkYsU0FBQUMsZUFBQSxVQUFBTixpQkFBQSxTQUFBOEUsR0FBQSxHQUNIekUsU0FBQUMsZUFBQSxVQUFBTixpQkFBQSxTQUFBOEUsR0FBQSxHQVdUekUsU0FBU0MsZUFBZSxVQUFVTixpQkFBaUIsU0FBVThFLEdBQWtCLE1Ba0QzRFUsUUFBQUEiLCJmaWxlIjoiZ2FtZS10LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGluZGV4X3ZpZXcgPSBuZXcgVnVlKHtcclxuICAgIGVsOiBcIiNhcHBcIixcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBmaWxlaW1nOiB7XHJcbiAgICAgICAgICAgIGZpbWcxOiBcIlwiLFxyXG4gICAgICAgICAgICBmaW1nMjogXCJcIixcclxuICAgICAgICAgICAgZmltZzM6IFwiXCIsXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICByZWFkcG90byhlKSB7ICAgICAgLy9pbnB1dCBmaWxlIG9uY2hhbmdlIGV2ZW50XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gZS50YXJnZXQuZmlsZXMuaXRlbSgwKTtcclxuICAgICAgICAgICAgdmFyIGlkID0gZS50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5pZCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGUpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLGltZ0xvYWQpO1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW1nTG9hZChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PSBcImZpbGVzMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZmlsZWltZy5maW1nMSA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ09iaiA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDUwMDtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gNTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZ09iai5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbCA9IGltZ09iai53aWR0aCAvIGltZ09iai5oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNTAwLDUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZ09iai53aWR0aCA+IDUwMCAmJiBpbWdPYmouaGVpZ2h0ID4gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZ09iaiwwLDAsaW1nT2JqLndpZHRoLGltZ09iai5oZWlnaHQsMCwwLGNhbnZhcy53aWR0aCxjYW52YXMud2lkdGgvcmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihpbWdPYmoud2lkdGggPiA1MDAgJiYgaW1nT2JqLmhlaWdodCA8IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdPYmosMCwwLGltZ09iai53aWR0aCxpbWdPYmouaGVpZ2h0LDAsMCxjYW52YXMud2lkdGgsY2FudmFzLndpZHRoL3JlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihpbWdPYmouaGVpZ2h0ID4gNTAwICYmIGltZ09iai53aWR0aCA8IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdPYmosMCwwLGltZ09iai53aWR0aCxpbWdPYmouaGVpZ2h0LDAsMCxjYW52YXMud2lkdGgqcmVsLGNhbnZhcy53aWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZ09iaiwwLDAsaW1nT2JqLndpZHRoLGltZ09iai5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGltZ09iai5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PSBcImZpbGVzMlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZmlsZWltZy5maW1nMiA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXMyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWdPYmogPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSA1MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IDUwMDtcclxuICAgICAgICAgICAgICAgICAgICBpbWdPYmoub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWwgPSBpbWdPYmoud2lkdGggLyBpbWdPYmouaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDUwMCw1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpbWdPYmoud2lkdGggPiA1MDAgJiYgaW1nT2JqLmhlaWdodCA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdPYmosMCwwLGltZ09iai53aWR0aCxpbWdPYmouaGVpZ2h0LDAsMCxjYW52YXMud2lkdGgsY2FudmFzLndpZHRoL3JlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoaW1nT2JqLndpZHRoID4gNTAwICYmIGltZ09iai5oZWlnaHQgPCA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nT2JqLDAsMCxpbWdPYmoud2lkdGgsaW1nT2JqLmhlaWdodCwwLDAsY2FudmFzLndpZHRoLGNhbnZhcy53aWR0aC9yZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoaW1nT2JqLmhlaWdodCA+IDUwMCAmJiBpbWdPYmoud2lkdGggPCA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nT2JqLDAsMCxpbWdPYmoud2lkdGgsaW1nT2JqLmhlaWdodCwwLDAsY2FudmFzLndpZHRoKnJlbCxjYW52YXMud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdPYmosMCwwLGltZ09iai53aWR0aCxpbWdPYmouaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpbWdPYmouc3JjID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaWQgPT0gXCJmaWxlczNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmZpbGVpbWcuZmltZzMgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzM1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1nT2JqID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSA1MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsID0gaW1nT2JqLndpZHRoIC8gaW1nT2JqLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw1MDAsNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nT2JqLndpZHRoID4gNTAwICYmIGltZ09iai5oZWlnaHQgPiA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nT2JqLDAsMCxpbWdPYmoud2lkdGgsaW1nT2JqLmhlaWdodCwwLDAsY2FudmFzLndpZHRoLGNhbnZhcy53aWR0aC9yZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGltZ09iai53aWR0aCA+IDUwMCAmJiBpbWdPYmouaGVpZ2h0IDwgNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZ09iaiwwLDAsaW1nT2JqLndpZHRoLGltZ09iai5oZWlnaHQsMCwwLGNhbnZhcy53aWR0aCxjYW52YXMud2lkdGgvcmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGltZ09iai5oZWlnaHQgPiA1MDAgJiYgaW1nT2JqLndpZHRoIDwgNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZ09iaiwwLDAsaW1nT2JqLndpZHRoLGltZ09iai5oZWlnaHQsMCwwLGNhbnZhcy53aWR0aCpyZWwsY2FudmFzLndpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nT2JqLDAsMCxpbWdPYmoud2lkdGgsaW1nT2JqLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nT2JqLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYXdMb29wKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICB2YXIgY2FudmFzMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzMlwiKTtcclxuICAgICAgICAgICAgdmFyIGNhbnZhczMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhczNcIik7XHJcbiAgICAgICAgICAgIC8vIHZhciBjYzEgPSBjYW52YXMxLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgLy8gdmFyIGNjMiA9IGNhbnZhczIuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICAvLyB2YXIgY2MzID0gY2FudmFzMy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgIHZhciBkcmF3aW1nMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmF3aW1nJyk7XHJcbiAgICAgICAgICAgIHZhciBkcmF3aW1nMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmF3aW1nMicpO1xyXG4gICAgICAgICAgICB2YXIgZHJhd2ltZzMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhd2ltZzMnKTtcclxuICAgICAgICAgICAgdmFyIGRjID0gZHJhd2ltZzEuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgdmFyIGRjMiA9IGRyYXdpbWcyLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIHZhciBkYzMgPSBkcmF3aW1nMy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICB2YXIgY3V0Y2FuMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXRjYW4nKTtcclxuICAgICAgICAgICAgdmFyIGN1dGNhbjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3V0Y2FuMicpO1xyXG4gICAgICAgICAgICB2YXIgY3V0Y2FuMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXRjYW4zJyk7XHJcbiAgICAgICAgICAgIHZhciBjdGMxID0gY3V0Y2FuMS5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICB2YXIgY3RjMiA9IGN1dGNhbjIuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgdmFyIGN0YzMgPSBjdXRjYW4zLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIGRyYXdpbWcxLndpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICBkcmF3aW1nMS5oZWlnaHQgPSA1MDA7XHJcbiAgICAgICAgICAgIGRyYXdpbWcyLndpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICBkcmF3aW1nMi5oZWlnaHQgPSA1MDA7XHJcbiAgICAgICAgICAgIGRyYXdpbWczLndpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICBkcmF3aW1nMy5oZWlnaHQgPSA1MDA7XHJcbiAgICAgICAgICAgIGN1dGNhbjEud2lkdGggPSBjdXRjYW4yLndpZHRoID0gY3V0Y2FuMy53aWR0aCA9IDIwMDtcclxuICAgICAgICAgICAgY3V0Y2FuMS5oZWlnaHQgPSBjdXRjYW4yLmhlaWdodCA9IGN1dGNhbjMuaGVpZ2h0ID0gMjAwO1xyXG4gICAgICAgICAgICBjdGMxLmZvbnQgPSBjdGMyLmZvbnQgPSBjdGMzLmZvbnQgPSBcIjMwcHggQ29taWMgU2FucyBNU1wiO1xyXG4gICAgICAgICAgICBjdGMxLnRleHRBbGlnbiA9IGN0YzIudGV4dEFsaWduID0gY3RjMy50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAvLyBjdXRjYW4xLndpZHRoID0gMTAwO1xyXG4gICAgICAgICAgICAvLyBjdXRjYW4xLmhlaWdodCA9IDEwMDtcclxuICAgICAgICAgICAgZGMuY2xlYXJSZWN0KDAsMCxkcmF3aW1nMS53aWR0aCxkcmF3aW1nMS5oZWlnaHQpO1xyXG4gICAgICAgICAgICBkYzIuY2xlYXJSZWN0KDAsMCxkcmF3aW1nMi53aWR0aCxkcmF3aW1nMi5oZWlnaHQpO1xyXG4gICAgICAgICAgICBkYzMuY2xlYXJSZWN0KDAsMCxkcmF3aW1nMy53aWR0aCxkcmF3aW1nMy5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjdGMxLmNsZWFyUmVjdCgwLDAsY3RjMS53aWR0aCxjdGMxLmhlaWdodCk7XHJcbiAgICAgICAgICAgIGN0YzIuY2xlYXJSZWN0KDAsMCxjdGMyLndpZHRoLGN0YzIuaGVpZ2h0KTtcclxuICAgICAgICAgICAgY3RjMy5jbGVhclJlY3QoMCwwLGN0YzMud2lkdGgsY3RjMy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB2YXIgY3RyYWNrZXIgPSBuZXcgY2xtLnRyYWNrZXIoKTtcclxuICAgICAgICAgICAgY3RyYWNrZXIuaW5pdCgpO1xyXG4gICAgICAgICAgICB2YXIgY3RyYWNrZXIyID0gbmV3IGNsbS50cmFja2VyKCk7XHJcbiAgICAgICAgICAgIGN0cmFja2VyMi5pbml0KCk7XHJcbiAgICAgICAgICAgIHZhciBjdHJhY2tlcjMgPSBuZXcgY2xtLnRyYWNrZXIoKTtcclxuICAgICAgICAgICAgY3RyYWNrZXIzLmluaXQoKTtcclxuICAgICAgICAgICAgY3RyYWNrZXIuc3RhcnQoY2FudmFzMSk7XHJcbiAgICAgICAgICAgIGN0cmFja2VyMi5zdGFydChjYW52YXMyKTtcclxuICAgICAgICAgICAgY3RyYWNrZXIzLnN0YXJ0KGNhbnZhczMpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsbXRyYWNrck5vdEZvdW5kXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIueFp+eJh+S4jeespuWQiFwiKTtcclxuICAgICAgICAgICAgICAgIGN0cmFja2VyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGN0cmFja2VyMi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBjdHJhY2tlcjMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjaHBvKTtcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBwb3Nsb29wKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHBvc2xvb3ApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvczEgPSBjdHJhY2tlci5nZXRDdXJyZW50UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHZhciBwb3MyID0gY3RyYWNrZXIyLmdldEN1cnJlbnRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvczMgPSBjdHJhY2tlcjMuZ2V0Q3VycmVudFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwb3MpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9zMVswXSxwb3MxWzddLHBvczFbMTRdLHBvczFbMjFdKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5TWCA9IHBvczFbMV1bMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FuU1kgPSBwb3MxWzIxXVsxXS0xMDtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5FWCA9IHBvczFbMTRdWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhbkVZID0gcG9zMVs3XVsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5TWDIgPSBwb3MyWzFdWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhblNZMiA9IHBvczJbMjFdWzFdLTEwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhbkVYMiA9IHBvczJbMTRdWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhbkVZMiA9IHBvczJbN11bMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FuU1gzID0gcG9zM1sxXVswXTtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5TWTMgPSBwb3MzWzIxXVsxXS0xMDtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5FWDMgPSBwb3MzWzE0XVswXTtcclxuICAgICAgICAgICAgICAgIHZhciBjYW5FWTMgPSBwb3MzWzddWzFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNXO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNIO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2FuU1gsY2FuU1ksY2FuRVgsY2FuRVkpO1xyXG4gICAgICAgICAgICAgICAgaWYoY3RyYWNrZXIuZ2V0Q3VycmVudFBvc2l0aW9uKCkgJiYgY3RyYWNrZXIyLmdldEN1cnJlbnRQb3NpdGlvbigpICYmIGN0cmFja2VyMy5nZXRDdXJyZW50UG9zaXRpb24oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNXID0gTWF0aC5hYnMoY2FuRVggLSBjYW5TWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY0ggPSBNYXRoLmFicyhjYW5FWSAtIGNhblNZKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjVyA+IGNIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNXID0gY0g7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY0ggPSBjV1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdHJhY2tlci5kcmF3KGRyYXdpbWcxKTtcclxuICAgICAgICAgICAgICAgICAgICBjdGMxLmRyYXdJbWFnZShjYW52YXMxLGNhblNYLGNhblNZLGNXLGNILDAsMCxjdXRjYW4xLndpZHRoLGN1dGNhbjEuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKGNocG8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmFja2VyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHJhY2tlci5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjVyA9IE1hdGguYWJzKGNhbkVYMiAtIGNhblNYMik7XHJcbiAgICAgICAgICAgICAgICAgICAgY0ggPSBNYXRoLmFicyhjYW5FWTIgLSBjYW5TWTIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNXID4gY0gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY1cgPSBjSDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjSCA9IGNXXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN0cmFja2VyMi5kcmF3KGRyYXdpbWcyKTtcclxuICAgICAgICAgICAgICAgICAgICBjdGMyLmRyYXdJbWFnZShjYW52YXMyLGNhblNYLGNhblNZLGNXLGNILDAsMCxjdXRjYW4yLndpZHRoLGN1dGNhbjIuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKGNocG8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmFja2VyMi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3RyYWNrZXIyLnJlc2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNXID0gTWF0aC5hYnMoY2FuRVgzIC0gY2FuU1gzKTtcclxuICAgICAgICAgICAgICAgICAgICBjSCA9IE1hdGguYWJzKGNhbkVZMyAtIGNhblNZMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY1cgPiBjSCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjVyA9IGNIO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNIID0gY1dcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3RyYWNrZXIzLmRyYXcoZHJhd2ltZzMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0YzMuZHJhd0ltYWdlKGNhbnZhczMsY2FuU1gsY2FuU1ksY1csY0gsMCwwLGN1dGNhbjMud2lkdGgsY3V0Y2FuMy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hwbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3RyYWNrZXIzLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHJhY2tlcjMucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY2hwbyA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvc2xvb3AoKTtcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjdHJhY2tlcik7XHJcbiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjdHJhY2tlci5kcmF3KGRyYXdpbWcxKTtcclxuICAgICAgICAgICAgLy8gICAgIGN0cmFja2VyLnN0b3AoKTtcclxuICAgICAgICAgICAgLy8gICAgIGN0cmFja2VyLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIC8vICAgICBjdHJhY2tlci5zdGFydChjYW52YXMyKTtcclxuICAgICAgICAgICAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY3RyYWNrZXIuZHJhdyhkcmF3aW1nMik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY3RyYWNrZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGN0cmFja2VyLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY3RyYWNrZXIuc3RhcnQoY2FudmFzMyk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY3RyYWNrZXIuZHJhdyhkcmF3aW1nMyk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGN0cmFja2VyLnN0b3AoKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY3RyYWNrZXIucmVzZXQoKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9LDEwMDApXHJcbiAgICAgICAgICAgIC8vICAgICB9LDEwMDApO1xyXG4gICAgICAgICAgICAvLyB9LDEwMDApO1xyXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xtdHJhY2tyTG9zdFwiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAvLyAgICAgY3RyYWNrZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAvLyAgICAgY3RyYWNrZXIucmVzZXQoKTtcclxuICAgICAgICAgICAgLy8gICAgIGFsZXJ0KFwi54Wn54mH5LiN56ym5ZCIXCIpO1xyXG4gICAgICAgICAgICAvLyB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FtZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBpbWdPYmogPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICAgICAgdmFyIGRyYXdJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdpbWdcIik7XHJcbiAgICAgICAgICAgIHZhciBkcmF3SW1nYyA9IGRyYXdJbWcuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSA1MDA7XHJcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSA1MDA7XHJcbiAgICAgICAgICAgIGRyYXdJbWcud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgICAgIGRyYXdJbWcuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgdmFyIGN0cmFja2VyID0gbmV3IGNsbS50cmFja2VyKCk7XHJcbiAgICAgICAgICAgIGN0cmFja2VyLmluaXQoKTtcclxuICAgICAgICAgICAgLy8gaW1nT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgY3R4LmRyYXdJbWFnZShpbWdPYmosMCwwLGltZ09iai53aWR0aCxpbWdPYmouaGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1nT2JqLDAsMCxpbWdPYmoud2lkdGgsaW1nT2JqLmhlaWdodCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gaW1nT2JqLnNyYyA9IFwiLi9pbWFnZXMvcGljMS5qcGdcIjtcclxuXHJcbiAgICAgICAgICAgIC8vIGN0cmFja2VyLnN0YXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSk7XHJcbiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gICAgIGN0cmFja2VyLmRyYXcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcmF3aW1nXCIpKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGN0cmFja2VyKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGRyYXdJbWcudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiLCAwLjcpKVxyXG4gICAgICAgICAgICAvLyB9LDEwMDApO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xtdHJhY2tyTm90Rm91bmRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGN0cmFja2VyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlIHRyYWNraW5nIGhhZCBwcm9ibGVtcyB3aXRoIGZpbmRpbmcgYSBmYWNlIGluIHRoaXMgaW1hZ2UuIFRyeSBzZWxlY3RpbmcgdGhlIGZhY2UgaW4gdGhlIGltYWdlIG1hbnVhbGx5LlwiKVxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmlsZUxpc3QsIGZpbGVJbmRleDtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwO2kgPCBmaWxlcy5sZW5ndGg7aSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZXNbaV0udHlwZS5tYXRjaCgnaW1hZ2UuKicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdC5wdXNoKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVGaWxlU2VsZWN0LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXMxJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVNlbGVjdCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlczMnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVGaWxlU2VsZWN0LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBsb2FkSW1hZ2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QuaW5kZXhPZihmaWxlSW5kZXgpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZnVuY3Rpb24odGhlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgcG9zaXRpb25zIGFscmVhZHkgZXhpc3QgaW4gc3RvcmFnZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlciB0aHVtYm5haWwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNjID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHJhd2ltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmF3aW1nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSBkcmF3aW1nLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGltZy5oZWlnaHQgPiA1MDAgfHwgaW1nLndpZHRoID4gNzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhciByZWwgPSBpbWcuaGVpZ2h0L2ltZy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdmFyIG5ld3cgPSA3MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhciBuZXdoID0gbmV3dypyZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmIChuZXdoID4gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBuZXdoID0gNTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbmV3dyA9IG5ld2gvcmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgbmV3dyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIG5ld2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBjYy5kcmF3SW1hZ2UoaW1nLDAsMCxuZXd3LCBuZXdoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZHJhd2ltZy53aWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZHJhd2ltZy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkcmF3SW1nYy5jbGVhclJlY3QoMCwgMCwgZHJhd2ltZy53aWR0aCwgZHJhd2ltZy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgaW1nLndpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaW1nLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNjLmRyYXdJbWFnZShpbWcsMCwwLGltZy53aWR0aCwgaW1nLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRyYXdpbWcud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRyYXdpbWcuaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgZHJhd0ltZ2MuY2xlYXJSZWN0KDAsIDAsIGRyYXdpbWcud2lkdGgsIGRyYXdpbWcuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbCA9IGltZy53aWR0aCAvIGltZy5oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5jbGVhclJlY3QoMCwwLDUwMCw1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRyYXdJbWFnZShpbWcsMCwwLGltZy53aWR0aCxpbWcuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYy5jbGVhclJlY3QoMCwwLDUwMCw1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZy53aWR0aCA+IDUwMCB8fCBpbWcuaGVpZ2h0ID4gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmNsZWFyUmVjdCgwLDAsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5kcmF3SW1hZ2UoaW1nLDAsMCxpbWcud2lkdGgsaW1nLmhlaWdodCwwLDAsY2FudmFzLndpZHRoLGNhbnZhcy53aWR0aC9yZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3aW1nLndpZHRoID0gY2FudmFzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3aW1nLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRjLmNsZWFyUmVjdCgwLDAsZHJhd2ltZy53aWR0aCxkcmF3aW1nLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmFja2VyLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RyYWNrZXIuc3RhcnQoY2FudmFzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmFja2VyLmRyYXcoZHJhd2ltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRyYXdJbWcudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiLCAwLjcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKGZpbGVMaXN0W2ZpbGVJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVMaXN0W2ZpbGVJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIC8vIHZtLmdhbWUoKTtcclxuICAgIH1cclxufSlcclxuXHJcbiJdfQ==
